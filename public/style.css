/* ============================
   NEONCHAT — Final polished CSS (Sidebar visible on mobile - icons-only)
   Final release: mobile layout and chat fixes included
   ============================ */

/* utility */
.hidden { display: none !important; }

/* reset / base */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body {
  height: 100%;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background: #030405;
  color: #c6ffff;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow: hidden; /* prevent page scroll, chat-body will scroll instead */
  font-size: 16px; /* desktop baseline */
}

/* body wrapper */
.neon-body {
  background: linear-gradient(180deg, #020204 0%, #04060A 100%);
  min-height: 100vh;
}

/* =============================
   MATRIX CANVAS
   ============================= */
.matrix {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  z-index: 0;
  opacity: 0.14;         /* subtle */
  filter: blur(0.8px);
  pointer-events: none;
}

/* =============================
   APP SHELL
   ============================= */
.app-shell {
  position: relative;
  min-height: 100vh;
  display: flex;
  gap: 20px;
  z-index: 2;
  height: 100vh;
  width: 100%;
  overflow: hidden;
}

/* =============================
   SIDEBAR — full on desktop, icons-only on mobile
   ============================= */
.sidebar {
  width: 220px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 20px 18px;
  background: linear-gradient(180deg, rgba(3,6,10,0.30), rgba(3,6,10,0.18));
  border-right: 1px solid rgba(0,234,255,0.06);
  backdrop-filter: blur(8px);
  box-shadow: 0 6px 30px rgba(0,0,0,0.6);
  z-index: 3;
  flex-shrink: 0;
}

.brand {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 18px;
}
.logo {
  width: 52px;
  height: 52px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg,#00f0ff,#3affc4);
  color:#001;
  font-weight:700;
  font-size:22px;
}
.brand-text { display:block; }
.brand-title { font-size:16px; font-weight:700; color:#9ff; }
.brand-sub { font-size:12px; color:#78d8d8; opacity:0.85; }

/* navigation */
.nav { display:flex; flex-direction:column; gap:10px; margin-bottom: 8px; }
.nav-btn {
  width:100%;
  text-align:left;
  padding:10px 12px;
  font-size:15px;
  color:#92faff;
  background: rgba(0,234,255,0.03);
  border-radius:10px;
  border: 1px solid transparent;
  cursor:pointer;
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}
.nav-btn:hover { background: rgba(0,234,255,0.10); transform: translateY(-2px); }
.nav-btn.active {
  background: rgba(0,234,255,0.14);
  border-color: rgba(0,234,255,0.22);
  color:#eaffff;
}

/* footer */
.sidebar-footer {
  margin-top: auto;
  padding-top: 12px;
  border-top: 1px solid rgba(0,234,255,0.05);
  display:flex;
  flex-direction:column;
  gap:12px;
}
.user-quick { display:flex; align-items:center; gap:12px; }
.avatar {
  width:46px; height:46px; border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  background: linear-gradient(135deg,#00f0ff,#3affc4);
  color:#001; font-weight:700;
}
.user-info { display:flex; flex-direction:column; line-height:1.05; }
.u-name { font-size:15px; font-weight:600; color:#dff; }
.u-status { font-size:13px; color:#9ad; }

/* theme toggle */
.icon-btn {
  background: rgba(0,234,255,0.08);
  border: 1px solid rgba(0,234,255,0.12);
  padding:8px 10px; border-radius:10px; cursor:pointer; font-size:18px;
}
.icon-btn:hover { background: rgba(0,234,255,0.14); }

/* =============================
   MAIN AREA
   ============================= */
.main-area {
  flex: 1;
  display:flex;
  flex-direction:column;
  padding: 18px;
  gap: 16px;
  overflow: hidden; /* only panels inside will scroll */
  min-width: 0; /* allow flex children to shrink nicely */
  width: 100%;
}

/* glass panels */
.glass-panel {
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(0,234,255,0.05);
  border-radius: 14px;
  padding: 20px;
  backdrop-filter: blur(8px);
  box-shadow: 0 10px 40px rgba(0,0,0,0.55);
}

/* =============================
   INTRO / USERNAME / PANELS
   ============================= */
.intro-screen {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 70vh;
  padding: 0;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* the compact intro card — tightly-sized */
.intro-inner {
  display: inline-block;
  background: rgba(10, 15, 20, 0.72);        /* opaque frosted panel */
  backdrop-filter: blur(8px) brightness(1.05);
  -webkit-backdrop-filter: blur(8px) brightness(1.05);
  border-radius: 14px;
  padding: 20px 26px; /* intentionally just around text */
  border: 1px solid rgba(0, 255, 230, 0.12);
  box-shadow: 0 10px 30px rgba(0,0,0,0.55), 0 0 18px rgba(0,255,200,0.06);
  max-width: 680px;
  width: auto;
  text-align: left;
  line-height: 1.2;
}

.intro-inner .intro-title,
.intro-inner h1 {
  font-size: 28px;
  font-weight: 700;
  color: #c8ffff;
  margin-bottom: 6px;
}
.intro-inner .intro-subtitle,
.intro-inner h2 {
  font-size: 36px;
  font-weight: 700;
  margin-bottom: 8px;
  background: linear-gradient(90deg,#00f0ff,#7bffb6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
}
.intro-inner .intro-desc,
.intro-inner p {
  font-size: 15px;
  color: rgba(220,255,255,0.92);
  line-height: 1.45;
  margin-bottom: 12px;
}

/* username screen tweak */
.username-screen .label { display:block; margin-bottom:8px; font-weight:700; color:#9ff; }
.username-screen .input { margin-bottom:10px; }

/* intro button spacing */
.primary-btn {
  display:inline-block;
  padding: 12px 20px;
  border-radius: 10px;
  background: linear-gradient(90deg,#00f0ff,#7bffb6);
  color: #001;
  font-weight:700;
  border: none;
  cursor: pointer;
}

/* continue spacing small gap (approx 5mm visual) */
#continueBtn { margin-top: 14px; }

/* =============================
   ROOMS / RECENT / SETTINGS panel small center style
   ============================= */
#roomsScreen.glass-panel {
  width: fit-content;
  max-width: 640px;
  padding: 18px 24px;
  margin: 0 auto;
  display: block;
}

/* =============================
   CHAT area — fixed + scrollable only in chat-body
   ============================= */
.chat {
  position: relative;
  flex: 1;
  display:flex;
  flex-direction:column;
  height: calc(100vh - 36px); /* header and spacing accounted */
  overflow: hidden; /* only chat-body will scroll */
  min-width: 0;
}

/* header */
.chat-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 16px;
  border-radius:10px;
  margin-bottom: 8px;
  border: 1px solid rgba(0,234,255,0.04);
  background: rgba(0,0,0,0.12);
}
.room-title { font-weight:700; color:#00ffd6; font-size:18px; }
.user-count { font-size:13px; color:#9ff; margin-left:8px; }

/* exit more visible */
.danger-btn {
  padding:10px 14px;
  border-radius:8px;
  border: 1px solid rgba(255,80,80,0.45);
  background: linear-gradient(180deg, rgba(255,40,40,0.12), rgba(255,40,40,0.08));
  color: #ffd6d6;
  cursor:pointer;
  font-weight:600;
}
.danger-btn:hover {
  background: linear-gradient(180deg, rgba(255,40,40,0.22), rgba(255,40,40,0.14));
  border-color: rgba(255,80,80,0.75);
}

/* chat-body — THE ONLY SCROLLING AREA */
.chat-body {
  flex: 1 1 auto;
  overflow-y: auto;
  padding: 22px;
  /* ensure the input doesn't overlap messages - support safe-area */
  padding-bottom: calc(140px + env(safe-area-inset-bottom, 0px));
  border-radius: 12px;
  background: rgba(0,0,0,0.56);
  backdrop-filter: blur(8px);
  -webkit-overflow-scrolling: touch;
}

/* messages list */
.messages {
  list-style:none;
  display:flex;
  flex-direction:column;
  gap:12px;
}

/* message bubble */
.message {
  max-width:78%;
  padding:12px 14px;
  border-radius:14px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.48);
  word-break: break-word;
  background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(244,248,255,0.98));
  color: #001;
  position: relative;
  display: inline-block;
}

/* self / other styling */
.self {
  margin-left: auto;
  background: linear-gradient(180deg,#d5ffd7,#b8ffd2);
  color: #002;
}
.other {
  margin-right: auto;
  background: linear-gradient(180deg,#ffffff,#f4f8ff);
  color:#001;
}
.system {
  align-self:center;
  background: transparent;
  color: #9ab;
  padding: 6px 10px;
  border-radius: 8px;
}

/* username label above bubble */
.msg-user {
  font-size: 14px;
  font-weight: 700;
  margin-bottom: 6px;
  color: #c3c3c3;
}

/* footer meta inside bubble */
.msg-footer {
  display:flex;
  justify-content:flex-end;
  gap:8px;
  margin-top:8px;
  align-items:center;
}
.msg-time { font-size:12px; color: rgba(0,0,0,0.45); }
.msg-tick { font-size:12px; color: rgba(0,0,0,0.45); opacity:0.85; }

/* reaction badges inside message */
.reactions { margin-top:10px; display:flex; gap:8px; flex-wrap:wrap; }
.reaction-badge { background: rgba(0,0,0,0.36); color:#fff; padding:4px 8px; border-radius:14px; font-size:13px; }

/* reaction bar (floating) */
.reaction-bar {
  position: fixed;
  display:flex;
  gap:10px;
  padding:8px 12px;
  border-radius:30px;
  background: linear-gradient(180deg, rgba(10,10,12,0.96), rgba(6,6,7,0.90));
  border: 1px solid rgba(0,234,255,0.12);
  z-index: 9999;
  pointer-events: none;
  opacity: 0;
  transform: translateY(-6px) scale(.98);
  transition: opacity .14s ease, transform .14s ease;
}
.reaction-bar.show { pointer-events: auto; opacity: 1; transform: translateY(0) scale(1); }
.reaction-bar span { font-size:20px; cursor:pointer; padding:6px; border-radius:8px; }

/* =============================
   Fixed bottom input toolbar
   ============================= */
.chat-toolbar {
  position: absolute; /* important: absolute inside .chat so it only shows there */
  left: 0;
  right: 0;
  bottom: env(safe-area-inset-bottom, 0px);
  padding: 14px 18px;
  background: rgba(0,0,0,0.52);
  border-top: 1px solid rgba(0,234,255,0.08);
  backdrop-filter: blur(8px);
  box-shadow: 0 -6px 30px rgba(0,0,0,0.5);
  display:flex;
  align-items:center;
  gap:10px;
  z-index: 30; /* above content but below reaction modal that uses 9999 */
}

.message-form { display:flex; gap:10px; flex:1; align-items:center; }
.message-input {
  flex:1;
  padding:12px 14px;
  border-radius: 12px;
  border: 1px solid rgba(0,234,255,0.12);
  background: linear-gradient(180deg,#02121a,#031220);
  color: #9ff;
  font-size: 15px;
  outline: none;
}
.message-input::placeholder { color: rgba(160,250,255,0.25); }

.send-btn {
  padding:12px 16px;
  border-radius:12px;
  border:none;
  background: linear-gradient(90deg,#d7d7d7,#e9e9e9); /* changed to light gray as requested */
  color: #001;
  font-weight:700;
  cursor:pointer;
  box-shadow: 0 6px 18px rgba(0,0,0,0.2);
}

/* form / overlay inputs */
.label { display:block; color:#9ff; margin-bottom:8px; font-weight:600; }
.input { width:100%; padding:10px; border-radius:8px; background: rgba(0,0,0,0.25); color:#cfe; border:1px solid rgba(255,255,255,0.03); }
.card-actions { display:flex; gap:12px; justify-content:center; margin-top:12px; }
.card-actions button { padding: 12px 22px; border-radius:10px; font-weight:600; cursor:pointer; }

/* errors and helper text */
.error { color:#ff9b9b; font-size:13px; margin-top:8px; }

/* =============================
   MOBILE: keep sidebar visible (icons-only) — CHOICE A
   ============================= */

/* Small screens global scale-down to avoid "pre-zoomed" effect */
@media (max-width: 760px) {
  html, body { font-size: 15px; } /* slightly smaller to fit content comfortably */

  /* sidebar becomes narrow icon-bar but remains visible */
  .sidebar {
    width: 64px !important;
    padding: 10px 8px !important;
    align-items: center;
  }
  .brand-text { display: none !important; }
  .user-info { display: none !important; }

  /* nav buttons show as compact icons (we don't have icons in markup so using dots) */
  .nav-btn {
    padding: 10px 8px !important;
    font-size: 0 !important; /* hide text */
    width: 100% !important;
    text-align: center !important;
    border-radius: 10px;
  }
  .nav-btn::before {
    content: "•";
    font-size: 18px;
    color: #8ff;
    display: inline-block;
  }

  /* reduce avatar size */
  .avatar { width: 40px; height: 40px; font-size: 14px; }

  /* main area reduces padding, keeps content space for sidebar */
  .main-area {
    padding: 10px !important;
    min-width: 0;
    width: calc(100% - 64px);
  }

  /* app-shell padding so the fixed sidebar doesn't overlap content */
  .app-shell { padding-left: 64px !important; }

  /* make chat take full remaining width (sidebar consumes small width) */
  .chat {
    width: 100% !important; /* important: use the full main-area width */
    margin-left: 0 !important;
    height: calc(100vh - 10px) !important;
    overflow: hidden !important;
  }

  /* ensure chat header is compact */
  .chat-header { padding: 10px; font-size: 14px; }

  /* chat-body smaller padding but still scrolls — ensure input does not overlap */
  .chat-body {
    padding: 12px !important;
    padding-bottom: calc(140px + env(safe-area-inset-bottom, 0px)) !important;
    overflow-y: auto !important;
  }

  /* message bubble width on phone */
  .message { max-width: 92% !important; }

  /* message username */
  .msg-user { font-size: 13px; }

  /* toolbar padding and button sizes for touch */
  .chat-toolbar { padding: 10px 12px !important; }
  .message-input { padding: 10px 12px; font-size: 15px; }
  .send-btn { padding: 10px 14px; font-size: 15px; }

  /* keep sidebar fixed so it doesn't scroll with content */
  .sidebar {
    position: fixed !important;
    top: 0;
    left: 0;
    height: 100vh !important;
    z-index: 1000;
    box-shadow: 0 6px 30px rgba(0,0,0,0.6);
  }

  /* intro card tweaks */
  .intro-inner { padding: 14px 18px !important; max-width: 95%; box-sizing: border-box; }
}

/* medium screens (tablet) tweaks */
@media (min-width: 761px) and (max-width: 1024px) {
  html, body { font-size: 15.5px; }
  .sidebar { width: 84px; }
  .nav-btn { font-size: 13px; padding: 10px 10px; }
  .app-shell { gap: 12px; }
  .intro-inner { padding: 18px 22px; max-width: 640px; }
  .chat { height: calc(100vh - 28px); }
}

/* accessibility: focus outlines */
.nav-btn:focus, .primary-btn:focus, .send-btn:focus, .danger-btn:focus, .icon-btn:focus {
  outline: 3px solid rgba(0,255,210,0.12);
  outline-offset: 2px;
}

/* small polish adjustments */
a, button { -webkit-tap-highlight-color: rgba(0,0,0,0); }
.message img { max-width: 100%; display: block; border-radius: 8px; }

/* keep long words from overflowing layout */
.message, .msg-text, .msg-user { word-break: break-word; hyphens: auto; }

/* final utility: ensure last message visible when appended */
.messages::after {
  content: "";
  display: block;
  height: 6px;
}
